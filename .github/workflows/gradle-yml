# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.
# This workflow will build a package using Gradle and then publish it to GitHub packages when a release is created
# For more information see: https://github.com/actions/setup-java/blob/main/docs/advanced-usage.md#Publishing-using-gradle

name: Gradle Package

on:
  release:
    types: [created]

jobs:
  build:

    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write

    steps:
    - uses: actions/checkout@v4
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'
        server-id: github # Value of the distributionManagement/repository/id field of the pom.xml
        settings-path: ${{ github.workspace }} # location for the settings.xml file

    - name: Setup Gradle
      uses: gradle/actions/setup-gradle@af1da67850ed9a4cedd57bfd976089dd991e2582 # v4.0.0

    - name: Build with Gradle
      run: ./gradlew build

    # The USERNAME and TOKEN need to correspond to the credentials environment variables used in
    # the publishing section of your build.gradle
    - name: Publish to GitHub Packages
      run: ./gradlew publish
      env:
        USERNAME: ${{ github.actor }}
        TOKEN: ${{ secrets.GITHUB_TOKEN }}
            - nom : Télécharger un artefact de construction
  utilisations : actions/upload-artifact@v4.6.2
  avec:
    # Nom de l'artefact
    nom : # facultatif, la valeur par défaut est artefact
    # Un fichier, un répertoire ou un modèle générique qui décrit ce qu'il faut télécharger
    chemin:
    # Le comportement souhaité si aucun fichier n'est trouvé en utilisant le chemin fourni.
Options disponibles :
  avertir : afficher un avertissement mais ne pas faire échouer l'action
  erreur : Échec de l'action avec un message d'erreur
  ignorer : ne pas afficher d'avertissements ni d'erreurs, l'action n'échoue pas

    if-no-files-found: # facultatif, la valeur par défaut est warn
    # Durée après laquelle l'artefact expirera en jours. 0 signifie utiliser la rétention par défaut.
Minimum 1 jour. Maximum 90 jours, sauf modification depuis la page des paramètres du dépôt.

    jours de rétention : # facultatif
    # Niveau de compression Zlib à appliquer à l'archive d'artefacts. La valeur peut varier de 0 à 9 : - 0 : Aucune compression - 1 : Vitesse optimale - 6 : Compression par défaut (identique à GNU Gzip) - 9 : Compression optimale. Des niveaux de compression plus élevés donneront une meilleure compression, mais prendront plus de temps. Pour les fichiers volumineux qui ne sont pas facilement compressibles, une valeur de 0 est recommandée pour des téléchargements nettement plus rapides.

    niveau de compression : # facultatif, la valeur par défaut est 6
    # Si la valeur est « true », un artefact portant le même nom sera supprimé avant qu'un nouveau ne soit téléchargé. Si la valeur est « false », l'action échouera si un artefact portant le même nom existe déjà. L'action n'échoue pas si l'artefact n'existe pas.

    écraser : # facultatif, la valeur par défaut est false
    # Si la valeur est true, les fichiers cachés seront inclus dans l'artefact. Si la valeur est false, les fichiers cachés seront exclus de l'artefact.

    include-hidden-files: # facultatif, la valeur par défaut est false
          
